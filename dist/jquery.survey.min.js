(function(e,t,n,r){function s(t,n){this.el=t;this.$el=e(t);this.surveyTitle=null;this.tableHead=null;this.tableBody=null;this.tableFooter=null;this.options=e.extend(true,{},e.fn[i].defaults,n);this.init()}var i="survey";s.prototype={init:function(){this.$el.attr("data-survey",this.options.id);this.$el.prepend(this._buildTitle());var e="<table class='table table-bordered table-condensed table-hover'>"+this._buildTableHead()+this._buildTableBody()+this._buildTableFooter()+"</table>";this.$el.append(e);this._resetSurvey();this._surveyChange();this._calculateTotals()},destroy:function(){this.$el.removeData()},toArray:function(){var t=[];var n=this.$el.find("tfoot td").filter("[data-type=total]");e(n).each(function(){t.push(e(this).text())});return t},_getSourceData:function(){var t=[];if(this.options.source){if(this.options.source.type==="array"){if(e.isArray(this.options.source.data)){t=this.options.source.data}}else if(this.options.source.type==="json"){}}return t},_buildTitle:function(){if(this.options.title!==r){this.surveyTitle="<h2 class='"+this.options.title.class+"' style='text-align:"+this.options.title.position+"'>"+this.options.title.text+"</h2>";return this.surveyTitle}},_buildTableHead:function(){this.tableHead="";if(this.options.questionsTitle!==r){this.tableHead+="<thead><tr><th>"+this.options.questionsTitle+"</th>"}if(this.options.optionsNumber!==r){for(var e=0;e<this.options.optionsNumber;e++){this.tableHead+="<th style='text-align:center;'>"+(e+1)+"</th>"}this.tableHead+="</tr></thead>";return this.tableHead}},_buildTableBody:function(){this.tableBody="<tbody>";var t=Number(this.options.optionsNumber);var n=this._getSourceData();that=this;e.each(n,function(e,n){that.tableBody+="<tr><td>"+n+"</td>";for(var r=0;r<t;r++){that.tableBody+="<td style='text-align: center;'>"+"<input type='radio' data-survey='"+that.options.id+"' data-question='"+(e+1)+"' data-opt='"+(r+1)+"'>"+"</td>"}that.tableBody+="</tr>"});this.tableBody+="</tbody>";return this.tableBody},_buildTableFooter:function(){this.tableFooter="";var e=Number(this.options.optionsNumber);if(this.options.footer===r||this.options.footer!==false){this.tableFooter+="<tfoot>";this.tableFooter+="<tr style='font-weight:bold;'><td style='text-align:right;'>Totals</td>";for(var t=0;t<e;t++){this.tableFooter+="<td data-survey='"+that.options.id+"' data-type='total' style='text-align:center;'>"+0+"</td>"}this.tableFooter+="</tfoot>"}return this.tableFooter},_resetSurvey:function(){var t=Number(this.options.optionsNumber);var n=this.$el.attr("data-survey");var r=this.$el.find("input[type=radio]").filter("[data-survey="+n+"]");e(r).each(function(){if(e(this).data("opt")===t){e(this).attr("checked","checked")}})},_surveyChange:function(){var t=this.$el.attr("data-survey");var n=this.$el.find("input[type=radio]");that=this;e(n).each(function(){e(this).on("click."+i,function(){var n=e(this).data("opt");var r=e(this).parents("tr").find("td input[type=radio]").filter("[data-survey="+t+"]").not("[data-opt="+n+"]");e(r).removeAttr("checked");e(this).attr("checked","checked");that._calculateTotals();that.options.onSurveyChange.call(this)})})},_calculateTotals:function(){var t=this.$el.attr("data-survey");var n=this.$el.find("td[data-type=total]").filter("[data-survey="+t+"]");that=this;e(n).each(function(){total=0;index=e(this).index();var n=that.$el.filter("[data-survey="+t+"]").find("td:nth-child("+(index+1)+")");total=e(n).find("input[type=radio]").filter(":checked").length;e(this).text(total)})}};e.fn[i]=function(t){var n=arguments;if(t===r||typeof t==="object"){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new s(this,t))}})}else if(typeof t==="string"&&t[0]!=="_"&&t!=="init"){if(Array.prototype.slice.call(n,1).length==0&&e.inArray(t,e.fn[i].getters)!=-1){var o=e.data(this[0],"plugin_"+i);return o[t].apply(o,Array.prototype.slice.call(n,1))}else{return this.each(function(){var r=e.data(this,"plugin_"+i);if(r instanceof s&&typeof r[t]==="function"){r[t].apply(r,Array.prototype.slice.call(n,1))}})}}};e.fn[i].getters=["toArray"];e.fn[i].defaults={id:"1",title:{text:"First Custom Survey","class":"surv-title-default",position:"center"},optionsNumber:10,questionsTitle:"Questions",footer:false,onSurveyChange:function(){}}})(jQuery,window,document)